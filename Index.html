<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Betti’s Sweets — Custom Cakes in Manchester</title>
  <meta name="description" content="Elegant, handmade custom cakes for weddings, birthdays and celebrations. Design your cake, request a quote, and book online. Reduced sugar, outstanding quality, unique flavours — based in Manchester, UK." />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#F6DDE3" />
  <link rel="canonical" href="https://bettissweets.co.uk/" />

  <!-- Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="image"
        href="https://images.unsplash.com/photo-1527515545081-5db817172677?q=80&w=1200&auto=format&fit=crop"
        imagesrcset="https://images.unsplash.com/photo-1527515545081-5db817172677?q=80&w=800&auto=format&fit=crop 800w,
                     https://images.unsplash.com/photo-1527515545081-5db817172677?q=80&w=1200&auto=format&fit=crop 1200w"
        imagesizes="(max-width: 900px) 100vw, 50vw">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&family=Great+Vibes&display=swap" rel="stylesheet">

  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Social sharing -->
  <meta property="og:title" content="Betti’s Sweets — Custom Cakes in Manchester">
  <meta property="og:description" content="Elegant, handmade cakes. Design online, request a quote, and book your date with a deposit.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://images.unsplash.com/photo-1527515545081-5db817172677?q=80&w=1200&auto=format&fit=crop">
  <meta property="og:image:alt" content="Soft pastel celebration cake">
  <meta property="og:url" content="https://bettissweets.co.uk/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://images.unsplash.com/photo-1527515545081-5db817172677?q=80&w=1200&auto=format&fit=crop">

  <style>
    :root{
      --blush:#F6DDE3; --peach:#FAD9CF; --ivory:#FFF7F2;
      --champagne:#E7D7C9; --rose-gold:#CFA38A; --rose-gold-deep:#B77E66;
      --gold-soft:#D0B48F; --ink:#4A3F3C; --muted:#7A6A66; --white:#ffffff;

      --font-heading:"Playfair Display", serif;
      --font-body:"Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --font-accent:"Great Vibes", cursive;

      --radius:22px; --pill:999px;
      --shadow:0 10px 30px rgba(79,60,54,.12);
      --shadow-soft:0 6px 20px rgba(79,60,54,.08);
      --section-pad: clamp(48px, 6vw, 96px);
      --maxw: 1150px;
      --focus:#1446A0;

      --gallery-h: 320px;
    }
    @media (min-width:1200px){ :root{ --gallery-h: 340px; } }

    *{box-sizing:border-box}
    html:focus-within{scroll-behavior:smooth}
    html,body{margin:0;padding:0;color:var(--ink);background:linear-gradient(180deg,var(--ivory),#fff);}
    body{font-family:var(--font-body);line-height:1.65}
    img{max-width:100%;height:auto;display:block}
    a{color:var(--rose-gold-deep);text-decoration:none}
    a:hover{text-decoration:underline}
    :focus-visible{outline:3px solid var(--focus); outline-offset:2px; border-radius:6px}
    .muted{color:var(--muted)}

    .container{max-width:var(--maxw);margin-inline:auto;padding-inline:clamp(16px,4vw,28px)}
    .grid{display:grid;gap:24px}
    .grid-2{grid-template-columns:1.1fr .9fr}
    .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    @media (max-width:980px){.grid-2{grid-template-columns:1fr}.grid-3{grid-template-columns:1fr 1fr}}
    @media (max-width:680px){.grid-3{grid-template-columns:1fr}}

    header{position:sticky;top:0;background:rgba(255,255,255,.8);backdrop-filter:saturate(140%) blur(8px);z-index:20;border-bottom:1px solid #f3e8e2}
    .nav{display:flex;align-items:center;justify-content:space-between;height:74px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo img{width:42px;height:42px;border-radius:50%;object-fit:cover;box-shadow:inset 0 0 0 2px rgba(255,255,255,.6), var(--shadow-soft)}
    .brand h1{font:700 22px/1 var(--font-heading);margin:0;letter-spacing:.2px}
    nav a{margin-left:22px;font-weight:500}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 20px;border-radius:var(--pill);font-weight:600;border:0;cursor:pointer;box-shadow:var(--shadow-soft)}
    .btn-primary{background:linear-gradient(135deg,var(--rose-gold),var(--gold-soft));color:#3e2e2a}
    .btn-primary:hover{filter:saturate(105%) brightness(1.02)}
    .btn-ghost{background:var(--white);color:var(--ink);border:1px solid #efdfd7}

    .mobile-actions{position:sticky;top:74px;z-index:19;border-bottom:1px solid #f3e8e2;display:none;background:rgba(255,255,255,.9);backdrop-filter:saturate(140%) blur(8px)}
    .mobile-actions .wrap{display:flex;gap:10px;justify-content:space-between;align-items:center;padding:10px 16px}
    .mobile-actions a{flex:1;display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:10px;border-radius:12px;font-weight:600}
    .mobile-actions svg{width:18px;height:18px;fill:#fff}
    .call-btn{background:#333;color:#fff}
    .wa-btn{background:linear-gradient(135deg,#25D366,#128C7E);color:#fff}
    @media (max-width:820px){.mobile-actions{display:block}}

    .hero{background:linear-gradient(180deg,var(--ivory),#fff 60%);}
    .hero-inner{display:grid;grid-template-columns:1.25fr 1fr;gap:36px;align-items:center;min-height:72vh}
    @media (max-width:980px){.hero-inner{grid-template-columns:1fr}}
    .eyebrow{font:600 13px var(--font-body);letter-spacing:.14em;text-transform:uppercase;color:var(--rose-gold-deep)}
    .hero h2{font:700 clamp(34px,5vw,56px)/1.05 var(--font-heading);margin:.4em 0}
    .script{font-family:var(--font-accent);font-size:clamp(20px,3vw,28px);color:var(--muted)}
    .hero-card{background:var(--white);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .hero-card img{width:100%;height:auto;border-radius:16px;object-fit:cover}

    section{padding-block:var(--section-pad)}
    .section-soft{background:linear-gradient(180deg,#fff,var(--ivory))}
    .section-peach{background:linear-gradient(180deg,var(--ivory),var(--peach))}
    .section-card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:clamp(20px,3vw,34px)}
    h3{font:700 clamp(22px,3.6vw,36px)/1.15 var(--font-heading);margin:0 0 10px}
    .sub{color:var(--muted);max-width:62ch;margin:0 auto 24px;text-align:center}

    .pill{background:#fff;border:1px solid #efdfd7;border-radius:999px;padding:8px 14px;font-size:14px;box-shadow:var(--shadow-soft)}
    .feature{border-radius:var(--radius);padding:22px;background:#fff;border:1px solid #efdfd7;box-shadow:var(--shadow-soft)}
    .feature h4{font:600 18px var(--font-heading);margin:.2em 0 .3em}
    .feature p{margin:0;color:var(--muted)}
    .feature img{width:100%;height:auto;border-radius:12px;margin-bottom:10px;object-fit:cover}

    .gallery{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .gallery a{grid-column:span 4;border-radius:18px;overflow:hidden;box-shadow:var(--shadow-soft);position:relative}
    @media (max-width:980px){.gallery a{grid-column:span 6}}
    @media (max-width:640px){.gallery a{grid-column:span 12}}
    .gallery img{width:100%; height:var(--gallery-h); object-fit:cover; transition:transform .35s; border-radius:18px;}
    .gallery a:hover img{transform:scale(1.04)}
    @media (prefers-reduced-motion:reduce){ .gallery a:hover img{transform:none} }

    .lightbox{position:fixed;inset:0;background:rgba(20,14,12,.72);display:none;align-items:center;justify-content:center;padding:20px;z-index:100;flex-direction:column}
    .lightbox img{max-height:80vh;border-radius:16px;box-shadow:var(--shadow)}
    .lightbox.active{display:flex}
    .lb-caption{color:#fff;margin-top:10px;text-align:center}
    .lb-caption a{color:#ffd1e1;font-weight:600}
    .lb-close{position:absolute;top:16px;right:16px;background:#fff;border:0;border-radius:999px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow);cursor:pointer}
    .lb-close span{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px)}

    .config{display:grid;grid-template-columns:1fr 1fr;gap:28px}
    @media (max-width:980px){.config{grid-template-columns:1fr}}
    .field{display:grid;gap:8px;margin-bottom:14px}
    .field label{font-weight:600}
    select,input[type="date"],input[type="number"],input[type="text"],input[type="email"],input[type="tel"],textarea{
      padding:12px;border-radius:12px;border:1px solid #ead9d2;background:#fff
    }
    textarea{min-height:120px}

    .est{border-radius:16px;background:linear-gradient(135deg,var(--blush),var(--champagne));padding:20px;box-shadow:var(--shadow)}
    .est h4{margin:.2em 0 .4em}
    .price{font:700 30px var(--font-heading)}
    .small{font-size:.92rem;color:#675852}
    .summary-note{font-size:.9rem;color:#5f514d;margin-top:8px}

    .table-wrap{overflow:auto}
    table{width:100%;border-collapse:collapse;background:#fff;border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
    th,td{padding:12px 14px;border-bottom:1px solid #efdfd7;text-align:left}
    th{background:linear-gradient(135deg,var(--blush),var(--champagne));font-weight:700}
    tr:last-child td{border-bottom:0}

    .insta{padding-block:var(--section-pad);background:linear-gradient(180deg,#fff,var(--ivory))}
    .insta h3{text-align:center}
    .insta-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:20px}
    .insta-grid a{border-radius:16px;overflow:hidden;box-shadow:var(--shadow-soft)}
    .insta-grid img{width:100%;height:auto;object-fit:cover;transition:.3s}
    .insta-grid a:hover img{transform:scale(1.05)}
    @media (prefers-reduced-motion:reduce){.insta-grid a:hover img{transform:none}}
    .insta-btn{text-align:center;margin-top:20px}

    .faq{max-width:900px;margin:0 auto}
    details{background:#fff;border:1px solid #efdfd7;border-radius:14px;box-shadow:var(--shadow-soft);padding:14px 16px}
    details+details{margin-top:12px}
    summary{cursor:pointer;font-weight:600}
    summary::-webkit-details-marker{display:none}

    footer{background:linear-gradient(180deg,var(--ivory),#fff);border-top:1px solid #f0e3dc}
    .foot{display:grid;grid-template-columns:2fr 1fr 1fr;gap:24px}
    @media (max-width:980px){.foot{grid-template-columns:1fr 1fr}}
    @media (max-width:680px){.foot{grid-template-columns:1fr}}
    .contact-list{list-style:none;padding:0;margin:8px 0 0}
    .contact-list li{margin:6px 0}
    .contact-list a{color:var(--ink)}
    .social{margin-top:12px;display:flex;gap:12px}
    .social a{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:var(--rose-gold);color:#fff;box-shadow:var(--shadow-soft)}
    .social svg{width:18px;height:18px;fill:#fff}

    .wa-float{position:fixed;right:18px;bottom:18px;z-index:120;width:56px;height:56px;border-radius:50%;box-shadow:var(--shadow);display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#25D366,#128C7E)}
    .wa-float svg{width:28px;height:28px;fill:#fff}
    .wa-float:hover{filter:brightness(1.05)}
    @media (prefers-reduced-motion:no-preference){.wa-float{transition:transform .15s ease, filter .15s ease}.wa-float:hover{transform:translateY(-2px)}}
    @media (max-width:820px){.wa-float{display:none}}

    .thankyou{display:none;text-align:center;padding:40px 16px}
    .ty-card{max-width:640px;margin:auto;background:linear-gradient(135deg,var(--blush),var(--champagne));padding:28px;border-radius:18px;box-shadow:0 8px 24px rgba(79,60,54,.08)}
    .ty-card h2{margin:0 0 10px 0;font:700 26px/1.25 var(--font-heading);color:var(--ink)}
    .ty-card p{margin:0 0 8px 0;font:400 16px/1.6 var(--font-body);color:#4A3F3C}
  </style>
</head>
<body>

<header>
  <div class="container nav">
    <div class="brand">
      <div class="logo"><img src="https://i.imgur.com/qS8XGqR.png" alt="Betti’s Sweets logo"></div>
      <h1>Betti’s Sweets</h1>
    </div>
    <nav aria-label="Primary">
      <a href="#gallery">Gallery</a>
      <a href="#customise">Design Your Cake</a>
      <a href="#sizes">Sizes</a>
      <a href="#faq">FAQ</a>
      <a href="#contact">Contact</a>
      <a href="#contact" class="btn btn-primary">Get a Quote</a>
    </nav>
  </div>
</header>

<div class="mobile-actions" role="region" aria-label="Quick actions">
  <div class="wrap container" style="padding-inline:clamp(16px,4vw,28px)">
    <a class="call-btn" href="tel:+447761297615" aria-label="Call Betti’s Sweets">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6.6 10.8c1.5 3 3.6 5.1 6.6 6.6l2.2-2.2c.3-.3.8-.4 1.2-.3 1 .3 2 .5 3 .5.7 0 1.2.5 1.2 1.2V20c0 .7-.5 1.2-1.2 1.2C9.8 21.2 2.8 14.2 2.8 5.2 2.8 4.5 3.3 4 4 4h3.4c.7 0 1.2.5 1.2 1.2 0 1 .2 2 .5 3 .1.4 0 .9-.3 1.2l-2.2 2.4z"/></svg>
      Call
    </a>
    <a class="wa-btn" href="https://wa.me/447761297615?text=Hi%20Betti%E2%80%99s%20Sweets%2C%20I%27d%20like%20to%20enquire%20about%20a%20custom%20cake." target="_blank" rel="noopener noreferrer" aria-label="WhatsApp Betti’s Sweets">
      <svg viewBox="0 0 32 32" aria-hidden="true"><path d="M16 3C9.9 3 5 7.9 5 14c0 2.2.6 4.2 1.7 6L5 27l7.2-1.9c1.7.9 3.6 1.3 5.8 1.3 6.1 0 11-4.9 11-11S22.1 3 16 3zm0 2c5 0 9 4 9 9s-4 9-9 9c-1.9 0-3.6-.6-5.1-1.5l-.4-.2-4 .9.9-3.9-.2-.4C6.2 16.6 6 15.3 6 14c0-5 4-9 10-9zm-3 5c-.2 0-.5.1-.7.4-.2.3-.7 1-.7 2 0 1.5 1 3.1 2.7 4.7 1.8 1.7 3.8 2.6 5.1 2.6 1 0 1.6-.5 1.9-.8.3-.3.5-.7.6-1 .1-.3 0-.6-.2-.7l-1.5-.7c-.2-.1-.4-.1-.6.1l-.7.8c-.1.1-.3.1-.5.1-.3 0-.9-.2-2-1.1-1.1-.8-1.7-1.7-1.9-2-.2-.3-.1-.4 0-.6l.6-.8c.1-.2.1-.4 0-.6l-.6-1.4c-.1-.3-.3-.4-.6-.4z"/></svg>
      WhatsApp
    </a>
  </div>
</div>

<section class="hero">
  <div class="container hero-inner">
    <div>
      <p class="eyebrow">Custom Cakes • Manchester, UK</p>
      <h2>Elegant, handmade cakes for weddings, birthdays & celebrations.</h2>
      <p class="script">soft, romantic & artistic</p>
      <ul class="hero-pills" aria-label="Key features" style="display:flex;gap:10px;flex-wrap:wrap;margin:18px 0;list-style:none;padding:0">
        <li class="pill">Reduced sugar</li>
        <li class="pill">Unique flavours</li>
        <li class="pill">Personalised toppers</li>
        <li class="pill">Freshly made to order</li>
      </ul>
      <a class="btn btn-primary" href="#customise">Design your cake</a>
    </div>
    <div class="hero-card">
      <img src="https://images.unsplash.com/photo-1527515545081-5db817172677?q=80&w=1200&auto=format&fit=crop"
           alt="Pastel celebration cake"
           fetchpriority="high" loading="eager" width="1200" height="800">
    </div>
  </div>
</section>

<!-- ... content unchanged down to the lightbox ... -->

<a class="wa-float" aria-label="Chat on WhatsApp"
   href="https://wa.me/447761297615?text=Hi%20Betti%E2%80%99s%20Sweets%2C%20I%27d%20like%20to%20enquire%20about%20a%20custom%20cake."
   target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 32 32" aria-hidden="true"><path d="M16 3C9.9 3 5 7.9 5 14c0 2.2.6 4.2 1.7 6L5 27l7.2-1.9c1.7.9 3.6 1.3 5.8 1.3 6.1 0 11-4.9 11-11S22.1 3 16 3zm0 2c5 0 9 4 9 9s-4 9-9 9c-1.9 0-3.6-.6-5.1-1.5l-.4-.2-4 .9.9-3.9-.2-.4C6.2 16.6 6 15.3 6 14c0-5 4-9 10-9zm-3 5c-.2 0-.5.1-.7.4-.2.3-.7 1-.7 2 0 1.5 1 3.1 2.7 4.7 1.8 1.7 3.8 2.6 5.1 2.6 1 0 1.6-.5 1.9-.8.3-.3.5-.7.6-1 .1-.3 0-.6-.2-.7l-1.5-.7c-.2-.1-.4-.1-.6.1l-.7.8c-.1.1-.3.1-.5.1-.3 0-.9-.2-2-1.1-1.1-.8-1.7-1.7-1.9-2-.2-.3-.1-.4 0-.6l.6-.8c.1-.2.1-.4 0-.6l-.6-1.4c-.1-.3-.3-.4-.6-.4z"/></svg>
</a>

<div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image preview" tabindex="-1">
  <button class="lb-close" id="lb-close" aria-label="Close image preview">
    <!-- × icon -->
    <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path d="M18.3 5.7a1 1 0 0 0-1.4-1.4L12 9.17 7.1 4.3a1 1 0 0 0-1.4 1.4L10.83 12l-5.13 4.9a1 1 0 1 0 1.4 1.4L12 14.83l4.9 4.87a1 1 0 0 0 1.4-1.4L13.17 12l5.13-4.9z"/></svg>
    <span>Close</span>
  </button>
  <img alt="" id="lb-img">
  <div class="lb-caption" id="lb-cap"></div>
</div>

<script>
  /* Lightbox with Instagram caption + focus trap + scroll lock + Esc */
  const grid = document.getElementById('galleryGrid');
  const lb   = document.getElementById('lightbox');
  const lbImg= document.getElementById('lb-img');
  const lbCap= document.getElementById('lb-cap');
  const lbClose = document.getElementById('lb-close');
  let lastFocus = null;

  function getFocusable(container){
    return Array.from(container.querySelectorAll(
      'a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'
    )).filter(el => !el.hasAttribute('disabled') && el.offsetParent !== null);
  }

  function openLightbox(href, ig){
    lbImg.src = href;
    lbCap.innerHTML = `View this design on <a href="${ig}" target="_blank" rel="noopener noreferrer">Instagram</a>`;
    lastFocus = document.activeElement;
    lb.classList.add('active');
    document.documentElement.style.overflow = 'hidden'; // lock scroll
    lb.setAttribute('aria-hidden','false');
    const f = getFocusable(lb);
    (f[0]||lb).focus();
  }

  function closeLightbox(){
    lb.classList.remove('active');
    lbImg.removeAttribute('src');
    document.documentElement.style.overflow = ''; // unlock scroll
    lb.setAttribute('aria-hidden','true');
    if(lastFocus) lastFocus.focus();
  }

  if(grid){
    grid.addEventListener('click', e=>{
      const a = e.target.closest('a'); if(!a) return;
      e.preventDefault();
      openLightbox(a.getAttribute('href'), a.getAttribute('data-ig')||'https://www.instagram.com/betti_sweets/');
    });
  }

  lb.addEventListener('click', (e)=>{
    // click backdrop or explicit close
    if(e.target === lb || e.target === lbClose || lbClose.contains(e.target)) closeLightbox();
  });

  document.addEventListener('keydown', (e)=>{
    if(!lb.classList.contains('active')) return;
    if(e.key === 'Escape'){ e.preventDefault(); closeLightbox(); }
    if(e.key === 'Tab'){
      const f = getFocusable(lb);
      if(!f.length) return;
      const i = f.indexOf(document.activeElement);
      let ni = i;
      if(e.shiftKey){ ni = (i <= 0 ? f.length : i) - 1; }
      else { ni = (i + 1) % f.length; }
      e.preventDefault();
      f[ni].focus();
    }
  });

  /* Min lead time for date inputs */
  function minDate(days){const d=new Date(); d.setDate(d.getDate()+days); return d.toISOString().split('T')[0];}
  ['date','event_date'].forEach(id=>{const el=document.getElementById(id); if(el){ el.min=minDate(7); }});

  /* Estimator + pipe summary into the form */
  const $=id=>document.getElementById(id);
  const pricing={base:{6:55,8:85,10:120,12:165},tierMult:{1:1,2:2.1,3:3.3},finish:{buttercream:1,ganache:1.12,fondant:1.22},extras:{freshFlorals:18,sugarFlorals:45,topper:20,reducedSugar:8},deliveryFlat:12};
  function buildSummary(total,deposit){
    const extras=[$('freshFlorals')?.checked?'Fresh florals':null,$('sugarFlorals')?.checked?'Sugar flowers':null,$('topper')?.checked?'Custom topper':null,$('reducedSugar')?.checked?'Reduced sugar':null].filter(Boolean).join(', ')||'None';
    return [
      `Occasion: ${$('occasion').value}`,
      `Size: ${$('size').value}"`,
      `Tiers: ${$('tiers').value}`,
      `Finish: ${$('finish').value}`,
      `Extras: ${extras}`,
      `Preferred date: ${$('date').value||'—'}`,
      `Postcode: ${($('postcode').value||'—').toUpperCase()}`,
      `Estimate: £${total} (Deposit 30%: £${deposit})`
    ].join(' | ');
  }
  function estimate(){
    const size=+$('size').value, tiers=+$('tiers').value, finish=$('finish').value;
    let subtotal=pricing.base[size]*pricing.tierMult[tiers]*pricing.finish[finish];
    if($('freshFlorals').checked) subtotal+=pricing.extras.freshFlorals;
    if($('sugarFlorals').checked) subtotal+=pricing.extras.sugarFlorals;
    if($('topper').checked) subtotal+=pricing.extras.topper;
    if($('reducedSugar').checked) subtotal+=pricing.extras.reducedSugar;
    let delivery=(($('postcode').value||'').trim())?pricing.deliveryFlat:0;
    const total=Math.round(subtotal+delivery), deposit=Math.round(total*0.30);
    $('price').textContent=`£${total}`; $('deposit').textContent=`Deposit (30%): £${deposit}`;
    const summary=buildSummary(total,deposit);
    const note=$('est-note'); if(note) note.textContent=`Summary ready: ${summary}`;
    $('estimator_summary').value=summary;
    const brief=$('brief'); if(brief){
      const s='\n\n--- Estimator summary ---\n', e='\n--- End summary ---';
      brief.value=brief.value.replace(/\n\n--- Estimator summary ---[\s\S]*?--- End summary ---/g,'');
      brief.value=brief.value+s+summary+e;
    }
  }
  const updateBtn=$('updateBtn'); if(updateBtn){ updateBtn.addEventListener('click',estimate); }
  estimate();

  /* Spam gate + inline thank-you; fallback to Netlify if JS blocked */
  const form=document.getElementById('quoteForm');
  const tsInput=document.getElementById('form_ts');
  const formStart=Date.now(); if(tsInput) tsInput.value=formStart.toString();

  form.addEventListener('submit',function(e){
    e.preventDefault();
    if(Date.now()-formStart<3000){ alert('Please wait a moment before submitting.'); return; }
    const priceText=$('price').textContent.replace(/[^\d]/g,'')||'0';
    const depText=$('deposit').textContent.replace(/[^\d]/g,'')||'0';
    $('estimator_summary').value=buildSummary(parseInt(priceText,10)||0, parseInt(depText,10)||0);
    const data=new FormData(form);
    fetch('/',{method:'POST',body:data})
      .then(r=>{ if(!r.ok) throw new Error(r.statusText); })
      .then(()=>{ form.style.display='none'; document.getElementById('thankyou').style.display='block'; })
      .catch(err=>alert('Error: '+err));
  });

  document.getElementById('year').textContent=new Date().getFullYear();
</script>

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Bakery",
  "name":"Betti’s Sweets",
  "address":{"@type":"PostalAddress","addressLocality":"Manchester","addressCountry":"GB"},
  "email":"hello@bettissweets.co.uk",
  "telephone":"+447761297615",
  "areaServed":"Manchester",
  "url":"https://bettissweets.co.uk/"
}
</script>

<!-- Analytics -->
<script defer data-domain="bettissweets.co.uk" src="https://plausible.io/js/script.js"></script>
</body>
</html>